{"version":3,"sources":["../node_modules/express/lib sync","actions/types.js","actions/index.js","components/payments.js","components/Heder.js","components/Landing.js","components/Dashboard.js","components/surveys/SurveyField.js","Utiles/validateEmails.js","components/surveys/SurveyForm.js","components/surveys/SurveyNew.js","components/App.js","reducers/index.js","reducers/authReducer.js","index.js"],"names":["webpackEmptyContext","req","e","Error","code","keys","resolve","module","exports","id","FETCH_USER","fetchUser","dispatch","a","axios","get","res","type","payload","data","handleToken","token","post","Payment","name","description","amount","props","stripeKey","process","className","Component","connect","actions","Header","this","auth","href","style","margin","credits","to","renderContent","Landing","textAlign","Dashboard","input","label","meta","marginBottom","marginTop","placeholder","error","touched","REGEX","FIELDS","SurveyForm","onSubmit","values","alert","JSON","stringify","validate","errors","recipients","emails","invalidEmails","split","pop","slice","length","map","email","trim","filter","test","join","validateEmails","render","handleSubmit","key","component","SurveyField","SurveyNew","App","exact","path","combineReducers","state","action","store","createStore","reducers","applyMiddleware","reduxThunk","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.5aeac746.chunk.js","sourcesContent":["function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 302;","export const FETCH_USER = \"fetct_user\";","import axios from \"axios\";\r\nimport { FETCH_USER } from \"./types\";\r\n\r\nexport const fetchUser = () => async (dispatch) => {\r\n  const res = await axios.get(\"/api/current_user\");\r\n  dispatch({\r\n    type: FETCH_USER,\r\n    payload: res.data,\r\n  });\r\n};\r\n\r\nexport const handleToken = (token) => async (dispatch) => {\r\n  const res = await axios.post(\"/api/stripe\", token);\r\n\r\n  dispatch({\r\n    type: FETCH_USER,\r\n    payload: res.data,\r\n  });\r\n};\r\n","import React, { Component } from \"react\";\r\nimport StripCheckout from \"react-stripe-checkout\";\r\nimport { connect } from \"react-redux\";\r\nimport * as actions from \"../actions\";\r\n\r\nclass Payment extends Component {\r\n  render() {\r\n    return (\r\n      <StripCheckout\r\n        name=\"Fullstack-ReactNode\"\r\n        description=\"$5 for 5 emails\"\r\n        amount={500}\r\n        token={(token) => this.props.handleToken(token)}\r\n        stripeKey={process.env.REACT_APP_STRIPE_KEY}\r\n      >\r\n        <button className=\"btn\">Add Credits</button>\r\n      </StripCheckout>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(null, actions)(Payment);\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Payment from \"./payments\";\r\n\r\nclass Header extends Component {\r\n  renderContent() {\r\n    switch (this.props.auth) {\r\n      case null:\r\n        return;\r\n\r\n      case false:\r\n        return (\r\n          <li>\r\n            <a href=\"/auth/google\">Login with Google</a>\r\n          </li>\r\n        );\r\n\r\n      default:\r\n        return (\r\n          <>\r\n            <li>\r\n              <Payment />\r\n            </li>\r\n            <li style={{ margin: \"0 10px\" }}>\r\n              Credits: {this.props.auth.credits}\r\n            </li>\r\n            <li>\r\n              <a href=\"/api/logout\">Logout</a>\r\n            </li>\r\n          </>\r\n        );\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <nav>\r\n        <div className=\"nav-wrapper\">\r\n          <Link\r\n            to={this.props.auth ? \"/surveys\" : \"/\"}\r\n            className=\"left brand-logo\"\r\n          >\r\n            Fullstack-ReactNode\r\n          </Link>\r\n          <ul className=\"right\">{this.renderContent()}</ul>\r\n        </div>\r\n      </nav>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps({ auth }) {\r\n  return { auth };\r\n}\r\n\r\nexport default connect(mapStateToProps)(Header);\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nclass Landing extends Component {\r\n  render() {\r\n    if (this.props.auth) return <Redirect to={\"/surveys\"} />;\r\n    return (\r\n      <div style={{ textAlign: \"center\" }}>\r\n        <h1>Fullstack-ReactNode</h1>\r\n        Collect feedback from your users\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps({ auth }) {\r\n  return { auth };\r\n}\r\n\r\nexport default connect(mapStateToProps)(Landing);\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nclass Dashboard extends Component {\r\n  render() {\r\n    return (\r\n      <div>\r\n        Dashboard\r\n        <div className=\"fixed-action-btn\">\r\n          <Link className=\"btn-floating btn-large red\" to={\"/surveys/new\"}>\r\n            <i className=\"large material-icons\">add</i>\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Dashboard;\r\n","//Survey contains some logic to render a single fields (label and input) the survey form\r\n\r\nimport React from \"react\";\r\n\r\nexport default ({ input, label, meta }) => {\r\n  return (\r\n    <div style={{ marginBottom: \"10px\", marginTop: \"10px\" }}>\r\n      <label>{label}: </label>\r\n      <input {...input} placeholder={label} />\r\n      {meta.error && meta.touched && (\r\n        <span className=\"red-text\">{meta.error}</span>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n","import e from \"express\";\r\n\r\nconst REGEX = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n\r\nexport default (emails) => {\r\n  //Ignoring an additional comma\r\n  const refinedEmails =\r\n    emails.split(\",\").pop() === \"\"\r\n      ? emails.slice(0, emails.length - 1)\r\n      : emails;\r\n\r\n  //Check for invalid emails\r\n  const invalidEmails = refinedEmails\r\n    .split(\",\")\r\n    .map((email) => email.trim())\r\n    .filter((email) => REGEX.test(email) === false);\r\n\r\n  if (invalidEmails.length)\r\n    return `Some email(s) are invalid: ${invalidEmails.join(\", \")}`;\r\n\r\n  return;\r\n};\r\n","import React, { Component } from \"react\";\r\nimport { Form, Field } from \"react-final-form\";\r\nimport { Link } from \"react-router-dom\";\r\nimport SurveyField from \"./SurveyField\";\r\nimport validateEmails from \"../../Utiles/validateEmails\";\r\n\r\nconst FIELDS = [\r\n  { label: \"Survey Title\", name: \"title\" },\r\n  { label: \"Subject\", name: \"subject\" },\r\n  { label: \"Email Body\", name: \"body\" },\r\n  { label: \"Emails\", name: \"recipients\" },\r\n];\r\nclass SurveyForm extends Component {\r\n  render() {\r\n    const renderFields = () => {\r\n      return (\r\n        <div>\r\n          {FIELDS.map(({ label, name }, key) => {\r\n            return (\r\n              <Field\r\n                key={key}\r\n                type=\"text\"\r\n                label={label}\r\n                name={name}\r\n                component={SurveyField}\r\n              />\r\n            );\r\n          })}\r\n        </div>\r\n      );\r\n    };\r\n\r\n    const onSubmit = (values) => {\r\n      alert(JSON.stringify(values));\r\n    };\r\n\r\n    const validate = (values) => {\r\n      const errors = {};\r\n\r\n      //Validate recipients/ emails\r\n      errors.recipients = validateEmails(values.recipients || \"\");\r\n\r\n      //Require all fields\r\n      for (const { label, name } of FIELDS) {\r\n        if (!values[name]) errors[name] = `You must provide value for ${label}`;\r\n      }\r\n\r\n      return errors;\r\n    };\r\n\r\n    return (\r\n      <Form\r\n        onSubmit={onSubmit}\r\n        validate={validate}\r\n        render={({ handleSubmit }) => (\r\n          <form onSubmit={handleSubmit}>\r\n            {renderFields()}\r\n            <Link className=\"red btn-flat white-text\" to={\"/surveys\"}>\r\n              Cancel\r\n              <i className=\"material-icons right\">cancel</i>\r\n            </Link>\r\n            <button type=\"submit\" className=\"teal btn-flat right white-text\">\r\n              Next\r\n              <i className=\"material-icons right\">done</i>\r\n            </button>\r\n          </form>\r\n        )}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default SurveyForm;\r\n","import React, { Component } from \"react\";\r\nimport SurveyForm from \"./SurveyForm\";\r\n\r\nclass SurveyNew extends Component {\r\n  render() {\r\n    return (\r\n      <div>\r\n        <SurveyForm />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SurveyNew;\r\n","import React, { Component } from \"react\";\r\nimport { BrowserRouter, Route } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport * as actions from \"../actions\";\r\n\r\nimport Header from \"./Heder\";\r\nimport Landing from \"./Landing\";\r\nimport Dashboard from \"./Dashboard\";\r\nimport SurveyNew from \"../components/surveys/SurveyNew\";\r\n\r\nclass App extends Component {\r\n  componentDidMount() {\r\n    this.props.fetchUser();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <BrowserRouter>\r\n        <div className=\"container\">\r\n          <Header />\r\n          <Route exact path=\"/\" component={Landing} />\r\n          <Route exact path=\"/surveys\" component={Dashboard} />\r\n\r\n          <Route exact path=\"/surveys/new\" component={SurveyNew} />\r\n        </div>\r\n      </BrowserRouter>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(null, actions)(App);\r\n","import { combineReducers } from \"redux\";\r\nimport authReducer from \"./authReducer\";\r\n\r\nexport default combineReducers({\r\n  auth: authReducer,\r\n});\r\n","import { FETCH_USER } from \"../actions/types\";\r\n\r\nexport default function authReducer(state = null, action) {\r\n  switch (action.type) {\r\n    case FETCH_USER:\r\n      return action.payload || false;\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import \"materialize-css/dist/css/materialize.min.css\";\r\nimport React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { Provider } from \"react-redux\";\r\nimport { createStore, applyMiddleware } from \"redux\";\r\nimport reduxThunk from \"redux-thunk\";\r\n\r\nimport App from \"./components/App\";\r\nimport reducers from \"./reducers\";\r\n\r\nconst store = createStore(reducers, {}, applyMiddleware(reduxThunk));\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <App />\r\n  </Provider>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}