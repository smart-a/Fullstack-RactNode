(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{73:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"fetchUser",(function(){return w})),n.d(r,"handleToken",(function(){return k})),n.d(r,"submitSurvey",(function(){return N})),n.d(r,"fetchSurveys",(function(){return S}));n(43);var a=n(0),c=n(21),s=n.n(c),i=n(9),u=n(17),o=n(40),l=n(5),j=n(6),b=n(8),d=n(7),h=n(14),p=n(3),v=n(15),O=n.n(v),f=n(19),x=n(20),m=n.n(x),y="fetct_user",g="fetct_surveys",w=function(){return function(){var e=Object(f.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get("/api/current_user");case 2:n=e.sent,t({type:y,payload:n.data});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},k=function(e){return function(){var t=Object(f.a)(O.a.mark((function t(n){var r;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.a.post("/api/stripe",e);case 2:r=t.sent,n({type:y,payload:r.data});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},N=function(e,t){return function(){var n=Object(f.a)(O.a.mark((function n(r){var a;return O.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,m.a.post("/api/surveys",e);case 2:a=n.sent,t.push("/surveys"),r({type:y,payload:a.data});case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},S=function(){return function(){var e=Object(f.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get("/api/surveys");case 2:n=e.sent,t({type:g,payload:n.data});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},C=n(41),R=n.n(C),A=n(1),F=function(e){Object(b.a)(n,e);var t=Object(d.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){var e=this;return Object(A.jsx)(R.a,{name:"Fullstack-ReactNode",description:"$5 for 5 emails",amount:500,token:function(t){return e.props.handleToken(t)},stripeKey:"pk_test_51IK0SiBnDzeEDaykICTZTAX9ik1DNyd2BL7RIYaBFXzwxFzds4vxzgmXhluG7xacRYggowr8tG9RtzuCTRvUrZRO00MsOGAcI6",children:Object(A.jsx)("button",{className:"btn",children:"Add Credits"})})}}]),n}(a.Component),D=Object(i.b)(null,r)(F),L=function(e){Object(b.a)(n,e);var t=Object(d.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"renderContent",value:function(){switch(this.props.auth){case null:return;case!1:return Object(A.jsx)("li",{children:Object(A.jsx)("a",{href:"/auth/google",children:"Login with Google"})});default:return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)("li",{children:Object(A.jsx)(D,{})}),Object(A.jsxs)("li",{style:{margin:"0 10px"},children:["Credits: ",this.props.auth.credits]}),Object(A.jsx)("li",{children:Object(A.jsx)("a",{href:"/api/logout",children:"Logout"})})]})}}},{key:"render",value:function(){return Object(A.jsx)("nav",{children:Object(A.jsxs)("div",{className:"nav-wrapper",children:[Object(A.jsx)(h.b,{to:this.props.auth?"/surveys":"/",className:"left brand-logo",children:"Fullstack-ReactNode"}),Object(A.jsx)("ul",{className:"right",children:this.renderContent()})]})})}}]),n}(a.Component);var T=Object(i.b)((function(e){return{auth:e.auth}}))(L),z=function(e){Object(b.a)(n,e);var t=Object(d.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){return this.props.auth?Object(A.jsx)(p.a,{to:"/surveys"}):Object(A.jsxs)("div",{style:{textAlign:"center"},children:[Object(A.jsx)("h1",{children:"Fullstack-ReactNode"}),"Collect feedback from your users"]})}}]),n}(a.Component);var B=Object(i.b)((function(e){return{auth:e.auth}}))(z),_=function(e){Object(b.a)(n,e);var t=Object(d.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchSurveys()}},{key:"renderList",value:function(){return this.props.surveys.reverse().map((function(e){return Object(A.jsxs)("div",{className:"card blue-grey darken-1 white-text",style:{marginTop:"10px"},children:[Object(A.jsxs)("div",{className:"card-content",children:[Object(A.jsx)("span",{className:"card-title",children:e.title}),Object(A.jsx)("p",{children:e.body}),Object(A.jsxs)("p",{className:"right",children:["Sent on: ",new Date(e.createdAt).toLocaleDateString()]})]}),Object(A.jsxs)("div",{className:"card-action",children:[Object(A.jsxs)("a",{href:"#",children:["Yes: ",e.yes]}),Object(A.jsxs)("a",{href:"#",children:["No: ",e.no]}),Object(A.jsxs)("span",{className:"right",children:["Last feedback: ",new Date(e.updatedAt).toLocaleDateString()]})]})]},e._id)}))}},{key:"render",value:function(){return Object(A.jsx)("div",{children:this.renderList()})}}]),n}(a.Component);var I=Object(i.b)((function(e){return{surveys:e.surveys}}),{fetchSurveys:S})(_),Z=function(e){Object(b.a)(n,e);var t=Object(d.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){return Object(A.jsxs)("div",{children:[Object(A.jsx)(I,{}),Object(A.jsx)("div",{className:"fixed-action-btn",children:Object(A.jsx)(h.b,{className:"btn-floating btn-large red",to:"/surveys/new",children:Object(A.jsx)("i",{className:"large material-icons",children:"add"})})})]})}}]),n}(a.Component),G=n(42),Y=n(28),M=n(29),U=[{label:"Survey Title",name:"title"},{label:"Subject",name:"subject"},{label:"Body",name:"body"},{label:"Recipients List",name:"recipients"}],X=function(e){var t=e.input,n=e.label,r=e.meta;return Object(A.jsxs)("div",{style:{marginBottom:"10px",marginTop:"10px"},children:[Object(A.jsxs)("label",{children:[n,": "]}),Object(A.jsx)("input",Object(M.a)(Object(M.a)({},t),{},{placeholder:n})),r.error&&r.touched&&Object(A.jsx)("span",{className:"red-text",children:r.error})]})},$=/^[a-zA-Z0-9.!#$%&\u2019*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/,E=function(e){return""===e.split(",").pop()?e.slice(0,e.length-1):e},J=function(e){var t=E(e).split(",").map((function(e){return e.trim()})).filter((function(e){return!1===$.test(e)}));if(t.length)return"Some email(s) are invalid: ".concat(t.join(", "))},K=function(e){Object(b.a)(n,e);var t=Object(d.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){var e=this,t=function(){var t=e.props.values;return Object(A.jsx)("div",{children:U.map((function(e,n){var r=e.label,a=e.name;return Object(A.jsx)(Y.a,{type:"text",label:r,name:a,component:X,initialValue:t[a]},n)}))})};return Object(A.jsx)(Y.b,{onSubmit:function(t){t.recipients=E(t.recipients),e.props.onSurveySubmit(t)},validate:function(e){var t={};t.recipients=J(e.recipients||"");var n,r=Object(G.a)(U);try{for(r.s();!(n=r.n()).done;){var a=n.value,c=a.label,s=a.name;e[s]||(t[s]="You must provide value for ".concat(c))}}catch(i){r.e(i)}finally{r.f()}return t},render:function(n){var r=n.handleSubmit;return Object(A.jsxs)("form",{onSubmit:r,children:[t(),Object(A.jsxs)(h.b,{className:"red btn-flat white-text",to:"/surveys",children:["Cancel",Object(A.jsx)("i",{className:"material-icons left",children:"cancel"})]}),Object(A.jsxs)("button",{type:"submit",className:"teal btn-flat right white-text",children:["Next",Object(A.jsx)("i",{className:"material-icons right",children:"done"})]}),Object(A.jsx)("div",{children:e.state})]})}})}}]),n}(a.Component),V=Object(i.b)(null,r)(Object(p.f)((function(e){var t=e.onCancel,n=e.values,r=e.submitSurvey,a=e.history;return Object(A.jsxs)("div",{children:[Object(A.jsx)("h2",{children:"Survey Review"}),Object(A.jsx)("div",{children:U.map((function(e,t){var r=e.label,a=e.name;return Object(A.jsxs)("div",{style:{marginBottom:"10px",marginTop:"10px"},children:[Object(A.jsxs)("label",{children:[r,": "]}),Object(A.jsx)("div",{children:n[a]})]},t)}))}),Object(A.jsxs)("button",{className:"yellow darken-3 btn-flat white-text",onClick:t,children:["Back",Object(A.jsx)("i",{className:"material-icons left",children:"arrow_back"})]}),Object(A.jsxs)("button",{className:"green darken-3 btn-flat white-text right",onClick:function(){return r(n,a)},children:["Send Survey",Object(A.jsx)("i",{className:"material-icons right",children:"email send"})]})]})}))),q=function(e){Object(b.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={showFormReview:!1,data:{title:"",subject:"",body:"",recipients:""}},e}return Object(j.a)(n,[{key:"renderContent",value:function(){var e=this;return this.state.showFormReview?Object(A.jsx)(V,{onCancel:function(){e.setState({showFormReview:!1})},values:this.state.data}):Object(A.jsx)(K,{onSurveySubmit:function(t){e.setState({showFormReview:!0,data:t})},values:this.state.data})}},{key:"render",value:function(){return Object(A.jsx)("div",{children:this.renderContent()})}}]),n}(a.Component),H=function(e){Object(b.a)(n,e);var t=Object(d.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchUser()}},{key:"render",value:function(){return Object(A.jsx)(h.a,{children:Object(A.jsxs)("div",{children:[Object(A.jsx)(T,{}),Object(A.jsxs)("div",{className:"container",children:[Object(A.jsx)(p.b,{exact:!0,path:"/",component:B}),Object(A.jsx)(p.b,{exact:!0,path:"/surveys",component:Z}),Object(A.jsx)(p.b,{exact:!0,path:"/surveys/new",component:q})]})]})})}}]),n}(a.Component),P=Object(i.b)(null,r)(H);var Q=Object(u.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return t.payload||!1;default:return e}},surveys:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return t.payload||[];default:return e}}}),W=Object(u.d)(Q,{},Object(u.a)(o.a));s.a.render(Object(A.jsx)(i.a,{store:W,children:Object(A.jsx)(P,{})}),document.getElementById("root"))}},[[73,1,2]]]);
//# sourceMappingURL=main.4bd38c1f.chunk.js.map